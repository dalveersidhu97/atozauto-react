import{S as a,d as s}from"./comparison.utils.49eb01ae.js";import{s as c,I as l,h as f,b as u,j as g}from"./content.utils.cdfe0a71.js";const m=()=>{if(!document.querySelector('nav[role="navigation"]'))return!1;let o=document.querySelector('svg[data-test-id="VtoLandingPage_Spinner"]');return o||(o=document.querySelector('svg[data-test-id="FindShiftsPageLoadingSpinner"]')),o?!1:(console.log("LOADED"),!0)},S=i=>{console.clear();let o;(()=>{chrome.storage.local.get(a.preference,function(n){if((n.preference||{}).refreshMode!=="Off"){l.add(()=>u("Loading..."));const e=5*1e3;o=setTimeout(()=>{window.location.reload(),g(e)},e)}})})(),setTimeout(()=>!!c&&c(),100),setInterval(()=>{const n=document.querySelector('div[aria-describedby="sr-session-expires-modal-message"]');if(!n)return;if(window.getComputedStyle(n).display!=="none"){const e=n.querySelector("#session-expires-modal-btn-stay-in");e==null||e.click(),n.style.display="none",console.log("modal is visible")}},300);const d=setInterval(()=>{m()&&(l.add(()=>f(" ")),o&&clearTimeout(o),clearInterval(d),chrome.storage.local.get(a.preference,function(r){const e=r.preference||s;Object.keys(s).forEach(t=>{e[t]===void 0&&(e[t]=s[t])}),i(e)}),document.querySelector('div[data-test-id="GenericErrorPageLayout"]')&&setTimeout(()=>window.location.reload(),2e3))},100)};export{S as s};
